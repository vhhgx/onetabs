# OneTabs V2.0 æ¶æ„è¯´æ˜

## ğŸ—„ï¸ çŠ¶æ€ç®¡ç† (Pinia Stores)

### Store æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Chrome Storage                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  tabGroups   â”‚onetabs_      â”‚onetabs_      â”‚onetabs_      â”‚  â”‚
â”‚  â”‚  (ä¼šè¯)      â”‚collections   â”‚templates     â”‚settings      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“              â†“              â†“              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Pinia Stores                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚sessionsStore â”‚collections   â”‚templates     â”‚settings      â”‚  â”‚
â”‚  â”‚              â”‚Store         â”‚Store         â”‚Store         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚sessions[]    â”‚collections[] â”‚templates[]   â”‚autoClose     â”‚  â”‚
â”‚  â”‚isLoading     â”‚isLoading     â”‚isLoading     â”‚keepPinned    â”‚  â”‚
â”‚  â”‚              â”‚currentColl   â”‚currentTpl    â”‚maxSessions   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“              â†“              â†“              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Vue Components                            â”‚
â”‚  SessionsView   CollectionsView  TemplatesView   Settings       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å„ Store è¯¦ç»†è¯´æ˜

#### sessionsStore.js
```javascript
// å­˜å‚¨é”®: tabGroups
state: {
  sessions: [],          // ä¼šè¯åˆ—è¡¨ (æŒ‰æ—¶é—´æ’åº)
  currentSession: null,
  isLoading: false,
  lastLoaded: null
}

// ä¸»è¦ Actions
loadSessions()           // ä» Storage åŠ è½½
saveSession(data)        // ä¿å­˜æ–°ä¼šè¯
deleteSession(id)        // åˆ é™¤ä¼šè¯
togglePinSession(id)     // ç½®é¡¶/å–æ¶ˆç½®é¡¶
restoreSession(id)       // æ¢å¤æ•´ä¸ªä¼šè¯
restoreTab(url)          // æ¢å¤å•ä¸ªæ ‡ç­¾é¡µ
```

#### collectionsStore.js
```javascript
// å­˜å‚¨é”®: onetabs_collections
state: {
  collections: [],       // æ”¶è—é›†åˆ—è¡¨
  currentCollection: null,
  isLoading: false
}

// ä¸»è¦ Actions
loadCollections()        // åŠ è½½æ”¶è—é›†
createCollection(data)   // åˆ›å»ºæ”¶è—é›†
updateCollection(id, data)  // æ›´æ–°æ”¶è—é›†
deleteCollection(id)     // åˆ é™¤æ”¶è—é›†
addTab(collectionId, tab)   // æ·»åŠ æ ‡ç­¾é¡µ
removeTab(collectionId, tabIndex)  // ç§»é™¤æ ‡ç­¾é¡µ
openCollection(id, options)  // æ‰“å¼€æ”¶è—é›†
```

#### templatesStore.js
```javascript
// å­˜å‚¨é”®: onetabs_templates
state: {
  templates: [],         // æ¨¡æ¿åˆ—è¡¨
  currentTemplate: null,
  isLoading: false
}

// ä¸»è¦ Actions
loadTemplates()          // åŠ è½½æ¨¡æ¿
createTemplate(data)     // åˆ›å»ºæ¨¡æ¿
createFromCurrentWindow(name, desc)  // ä»å½“å‰çª—å£åˆ›å»º
updateTemplate(id, data) // æ›´æ–°æ¨¡æ¿
deleteTemplate(id)       // åˆ é™¤æ¨¡æ¿
duplicateTemplate(id)    // å¤åˆ¶æ¨¡æ¿
openTemplate(id)         // æ‰“å¼€æ¨¡æ¿
```

#### settingsStore.js
```javascript
// å­˜å‚¨é”®: onetabs_settings
state: {
  autoClose: true,       // æ”¶çº³åè‡ªåŠ¨å…³é—­
  keepPinned: false,     // ä¿ç•™å›ºå®šæ ‡ç­¾é¡µ
  maxSessions: 50,       // æœ€å¤§ä¼šè¯æ•°
  enableDrag: true,      // å¯ç”¨æ‹–æ‹½
  removeAfterDrag: false, // æ‹–æ‹½åç§»é™¤æº
  showDragPreview: true  // æ˜¾ç¤ºæ‹–æ‹½é¢„è§ˆ
}
```

#### themeStore.js
```javascript
// å­˜å‚¨é”®: onetabs_theme
state: {
  currentTheme: 'light', // 'light' | 'dark'
  followSystem: false,   // è·Ÿéšç³»ç»Ÿ
  systemPreference: 'light'
}

// ä¸»è¦ Actions
setTheme(theme)          // è®¾ç½®ä¸»é¢˜
setFollowSystem(value)   // è®¾ç½®è·Ÿéšç³»ç»Ÿ
applyTheme()             // åº”ç”¨ä¸»é¢˜åˆ°DOM
```

---

## ğŸ¨ UIç»„ä»¶è¯¦è§£

### SessionCard ç»„ä»¶

ä¼šè¯å¡ç‰‡ï¼Œå±•ç¤ºä¿å­˜çš„æ ‡ç­¾é¡µç»„ã€‚

```
ç»“æ„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ card-header (ç‚¹å‡»å±•å¼€/æ”¶èµ·, å³é”®èœå•)               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ é¢œè‰² â”‚ æ ‡é¢˜ + å…ƒä¿¡æ¯          â”‚ æ“ä½œæŒ‰é’®       â”‚ â”‚
â”‚ â”‚ æŒ‡ç¤º â”‚ "å·¥ä½œ" Â· 5åˆ†é’Ÿå‰ Â· 4ä¸ª â”‚ ğŸ“Œ æ¢å¤ åˆ é™¤   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ card-body (v-show="isExpanded")                     â”‚
â”‚ â”œâ”€â”€ TabItem (draggable, å¯åˆ é™¤, å¯æ·»åŠ åˆ°æ”¶è—é›†)    â”‚
â”‚ â”œâ”€â”€ TabItem                                         â”‚
â”‚ â””â”€â”€ TabItem                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Props: session (Object)
Events: @restore, @delete, @toggle-pin

å†…éƒ¨çŠ¶æ€:
- isExpanded: boolean (é»˜è®¤true)
- showContextMenu: boolean
- contextMenuPosition: {x, y}

äº¤äº’é€»è¾‘:
- ç‚¹å‡»header â†’ åˆ‡æ¢å±•å¼€çŠ¶æ€
- å³é”®header â†’ æ˜¾ç¤ºä¸Šä¸‹æ–‡èœå•
- ç‚¹å‡»æ¢å¤ â†’ emit('restore', session.date)
- ç‚¹å‡»åˆ é™¤ â†’ ç¡®è®¤å¼¹çª— â†’ emit('delete', session.date)
```

### CollectionCard ç»„ä»¶

æ”¶è—é›†å¡ç‰‡ï¼Œå±•ç¤ºç”¨æˆ·åˆ›å»ºçš„æ ‡ç­¾é¡µç»„ã€‚

```
ç»“æ„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ card-header                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ é¢œè‰² â”‚ åç§° + æ ‡ç­¾æ•°          â”‚ æ“ä½œæŒ‰é’®       â”‚ â”‚
â”‚ â”‚ åœ†ç‚¹ â”‚ "å¼€å‘èµ„æº" Â· 8ä¸ªæ ‡ç­¾é¡µ â”‚ â­ å¼€ ç¼– åˆ     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ card-body (å¯æŠ˜å )                                  â”‚
â”‚ â”œâ”€â”€ tab-item (ç‚¹å‡»æ‰“å¼€, å¯åˆ é™¤)                    â”‚
â”‚ â”œâ”€â”€ tab-item                                        â”‚
â”‚ â””â”€â”€ tab-item                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Props: collection (Object)
Events: @pin, @open, @open-current, @edit, @delete, @duplicate, @add-to-template, @remove-tab

äº¤äº’é€»è¾‘:
- æ‰“å¼€ â†’ chrome.tabs.createæ‰¹é‡åˆ›å»º + chrome.tabGroups.groupåˆ›å»ºåˆ†ç»„
- ç¼–è¾‘ â†’ æ‰“å¼€CollectionEditorå¼¹çª—
- åˆ é™¤ â†’ ç¡®è®¤å¼¹çª— â†’ collectionsStore.deleteCollection()
- å³é”® â†’ æ˜¾ç¤ºä¸Šä¸‹æ–‡èœå•
```

### TemplateCard ç»„ä»¶

æ¨¡æ¿å¡ç‰‡ï¼Œå±•ç¤ºçª—å£æ¨¡æ¿ã€‚

```
ç»“æ„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ card-header                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ å›¾æ ‡ â”‚ åç§° + æè¿°            â”‚ æ“ä½œæŒ‰é’®       â”‚ â”‚
â”‚ â”‚ ğŸ“‹   â”‚ "å·¥ä½œç¯å¢ƒ"             â”‚ å¼€ ç¼– å¤ åˆ     â”‚ â”‚
â”‚ â”‚      â”‚ 2ä¸ªæ”¶è—é›† Â· 15ä¸ªæ ‡ç­¾é¡µ â”‚                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ card-body (å¯æŠ˜å )                                  â”‚
â”‚ â”œâ”€â”€ æ”¶è—é›†é¢„è§ˆ                                     â”‚
â”‚ â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   â”‚ [è“] å¼€å‘èµ„æº (5) [å¼•ç”¨]                  â”‚ â”‚
â”‚ â”‚   â”‚ [çº¢] è®¾è®¡å‚è€ƒ (3) [å¿«ç…§]                  â”‚ â”‚
â”‚ â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â””â”€â”€ ç‹¬ç«‹æ ‡ç­¾é¡µé¢„è§ˆ                                 â”‚
â”‚     â”œâ”€â”€ tab-preview                                â”‚
â”‚     â””â”€â”€ tab-preview                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Props: template (Object)
Events: @open, @edit, @duplicate, @delete

äº¤äº’é€»è¾‘:
- æ‰“å¼€ â†’ chrome.windows.createåˆ›å»ºæ–°çª—å£ â†’ éå†collectionsåˆ›å»ºæ ‡ç­¾é¡µå’Œåˆ†ç»„
- å¼•ç”¨æ¨¡å¼ â†’ ä»collectionsStoreè·å–æœ€æ–°æ•°æ®
- å¿«ç…§æ¨¡å¼ â†’ ä½¿ç”¨template.collectionsä¸­ä¿å­˜çš„æ•°æ®
- å¤åˆ¶ â†’ å…‹éš†æ•°æ® + æ–°ID + åç§°åŠ "(å‰¯æœ¬)"
```

### Editor å¼¹çª—ç»„ä»¶

CollectionEditor å’Œ TemplateEditor å…±ç”¨çš„æ¨¡å¼ã€‚

```
CollectionEditor:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [åˆ›å»º/ç¼–è¾‘æ”¶è—é›†]                              [X]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ”¶è—é›†åç§°: [________________]                        â”‚
â”‚                                                        â”‚
â”‚ æ ‡ç­¾é¢œè‰²:  â— â— â— â— â— â— â— â— â—  (9ç§Chromeé¢œè‰²)        â”‚
â”‚                                                        â”‚
â”‚ æ ‡ç­¾é¡µ (3):                    [ä»çª—å£é€‰æ‹©] [æ‰‹åŠ¨æ·»åŠ ] â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ â‰¡  ğŸŒ GitHub - xxx               [Ã—]              â”‚â”‚
â”‚ â”‚ â‰¡  ğŸŒ Stack Overflow - xxx       [Ã—]              â”‚â”‚
â”‚ â”‚ â‰¡  ğŸŒ MDN Web Docs               [Ã—]              â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              [å–æ¶ˆ]  [ä¿å­˜]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

éªŒè¯è§„åˆ™:
- åç§°ä¸èƒ½ä¸ºç©º
- è‡³å°‘1ä¸ªæ ‡ç­¾é¡µ

TemplateEditor:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [åˆ›å»º/ç¼–è¾‘çª—å£æ¨¡æ¿]                            [X]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ¨¡æ¿åç§°: [________________]                          â”‚
â”‚ æè¿°:     [________________]                          â”‚
â”‚                                                        â”‚
â”‚ åˆ›å»ºæ–¹å¼: [ä»å½“å‰çª—å£] [æ‰‹åŠ¨åˆ›å»º]                     â”‚
â”‚                                                        â”‚
â”‚ æ ‡ç­¾é¡µç»„ (2):                        [æ·»åŠ æ”¶è—é›†]     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ â‰¡ [è“] å¼€å‘èµ„æº (5) [å¼•ç”¨] â˜‘åˆ›å»ºåˆ†ç»„        [Ã—]   â”‚â”‚
â”‚ â”‚ â‰¡ [çº¢] è®¾è®¡å‚è€ƒ (3) [å¿«ç…§] â˜‘åˆ›å»ºåˆ†ç»„        [Ã—]   â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                        â”‚
â”‚ ç‹¬ç«‹æ ‡ç­¾é¡µ (1):                      [æ·»åŠ æ ‡ç­¾é¡µ]     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ ğŸŒ Google â˜å›ºå®š                              [Ã—]  â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              [å–æ¶ˆ]  [ä¿å­˜]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ æ ¸å¿ƒäº¤äº’å®ç°

### æ‹–æ‹½ç³»ç»Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‹–æ‹½æº                              æ‹–æ‹½ç›®æ ‡                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  TabItem        â”‚  â”€â”€â”€æ‹–æ‹½â”€â”€â”€â–¶   â”‚  DropZone       â”‚     â”‚
â”‚  â”‚  (draggable)    â”‚                â”‚  (collection/   â”‚     â”‚
â”‚  â”‚                 â”‚                â”‚   template)     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚        â”‚                                   â”‚                 â”‚
â”‚        â–¼                                   â–¼                 â”‚
â”‚  DragPreview                          è§†è§‰åé¦ˆ               â”‚
â”‚  (è·Ÿéšé¼ æ ‡)                           (è¾¹æ¡†é«˜äº®)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ‹–æ‹½æ•°æ®æ ¼å¼:**
```javascript
{
  tab: { url, title, favIconUrl },
  sourceType: 'session' | 'collection' | 'template',
  sourceId: string
}
```

### å³é”®èœå•ç³»ç»Ÿ

```javascript
// utils/contextMenus.js
export const getSessionContextMenu = (session) => [
  { id: 'restore', label: 'æ¢å¤å…¨éƒ¨', icon: 'pi pi-refresh' },
  { id: 'pin', label: session.isPinned ? 'å–æ¶ˆç½®é¡¶' : 'ç½®é¡¶' },
  { divider: true },
  { id: 'delete', label: 'åˆ é™¤', danger: true }
]

export const getTabContextMenu = (tab) => [
  { id: 'open', label: 'æ‰“å¼€' },
  { id: 'copy-url', label: 'å¤åˆ¶é“¾æ¥' },
  { id: 'add-to-collection', label: 'æ·»åŠ åˆ°æ”¶è—é›†' },
  { id: 'add-to-template', label: 'æ·»åŠ åˆ°æ¨¡æ¿' },
  { divider: true },
  { id: 'delete', label: 'åˆ é™¤', danger: true }
]
```

### å¿«æ·é”®ç³»ç»Ÿ

```javascript
// utils/shortcuts.js
export const shortcuts = {
  FOCUS_SEARCH: { key: 'ctrl+f', mac: 'cmd+f' },
  OPEN_SETTINGS: { key: 'ctrl+,', mac: 'cmd+,' },
  TAB_SESSIONS: { key: 'ctrl+1', mac: 'cmd+1' },
  TAB_COLLECTIONS: { key: 'ctrl+2', mac: 'cmd+2' },
  TAB_TEMPLATES: { key: 'ctrl+3', mac: 'cmd+3' },
  CLOSE_DIALOG: { key: 'esc' }
}
```

---

## ğŸ“¦ æ•°æ®ç»“æ„

### Session (ä¼šè¯)

```javascript
{
  date: number,              // æ—¶é—´æˆ³ï¼Œä½œä¸ºå”¯ä¸€ID
  type: 'grouped' | 'ungrouped',
  title: string,             // ä¼šè¯æ ‡é¢˜
  isPinned: boolean,         // æ˜¯å¦ç½®é¡¶
  groupInfo: {               // ä»… grouped ç±»å‹
    id: number,
    title: string,
    color: string,           // Chrome Tab Groupé¢œè‰²
    collapsed: boolean
  },
  tabs: [
    {
      url: string,
      title: string,
      favIconUrl: string,
      groupId: number
    }
  ]
}
```

### Collection (æ”¶è—é›†)

```javascript
{
  id: string,                // å”¯ä¸€ID: `collection_${timestamp}_${random}`
  name: string,              // æ”¶è—é›†åç§°
  color: string,             // é¢œè‰²: grey/blue/red/yellow/green/pink/purple/cyan/orange
  icon: string,              // å›¾æ ‡ emoji
  pinned: boolean,           // æ˜¯å¦ç½®é¡¶
  createdAt: number,
  updatedAt: number,
  tabs: [
    {
      id: string,
      url: string,
      title: string,
      favIconUrl: string,
      order: number
    }
  ]
}
```

### Template (çª—å£æ¨¡æ¿)

```javascript
{
  id: string,                // å”¯ä¸€ID: `template_${timestamp}_${random}`
  name: string,              // æ¨¡æ¿åç§°
  description: string,       // æ¨¡æ¿æè¿°
  icon: string,              // å›¾æ ‡ emoji
  createdAt: number,
  updatedAt: number,
  collections: [             // åŒ…å«çš„æ”¶è—é›†
    {
      id: string,            // æ”¶è—é›†IDæˆ–ä¸´æ—¶ID
      collectionId: string,  // å¼•ç”¨çš„æ”¶è—é›†ID (å¼•ç”¨æ¨¡å¼)
      name: string,
      color: string,
      isReference: boolean,  // true=å¼•ç”¨æ¨¡å¼, false=å¿«ç…§æ¨¡å¼
      createGroup: boolean,  // æ‰“å¼€æ—¶æ˜¯å¦åˆ›å»ºTab Group
      tabs: [...]            // å¿«ç…§æ¨¡å¼æ—¶çš„æ ‡ç­¾é¡µæ•°æ®
    }
  ],
  standaloneTabs: [          // ç‹¬ç«‹æ ‡ç­¾é¡µ
    {
      id: string,
      url: string,
      title: string,
      favIconUrl: string,
      pinned: boolean        // æ˜¯å¦å›ºå®šæ ‡ç­¾é¡µ
    }
  ]
}
```

---

## ğŸ¯ Chrome API ä½¿ç”¨

### background.js æ ¸å¿ƒé€»è¾‘

```javascript
// 1. ç›‘å¬æ‰©å±•å›¾æ ‡ç‚¹å‡»
chrome.action.onClicked.addListener(async () => {
  await saveTabs()
})

// 2. ä¿å­˜æ ‡ç­¾é¡µæµç¨‹
async function saveTabs() {
  // è·å–è®¾ç½®
  const settings = await chrome.storage.local.get(['onetabs_settings'])
  
  // è·å–å½“å‰çª—å£
  const currentWindow = await chrome.windows.getCurrent()
  
  // è·å–æ‰€æœ‰æ ‡ç­¾é¡µ
  const tabs = await chrome.tabs.query({ windowId: currentWindow.id })
  
  // è·å–æ ‡ç­¾ç»„ä¿¡æ¯
  const tabGroups = await chrome.tabGroups.query({ windowId: currentWindow.id })
  
  // ç»„ç»‡æ•°æ®å¹¶ä¿å­˜
  await chrome.storage.local.set({ tabGroups: organizedData })
  
  // æ‰“å¼€æ‰©å±•é¡µé¢
  await chrome.tabs.create({ url: chrome.runtime.getURL('index.html') })
  
  // å…³é—­å…¶ä»–æ ‡ç­¾é¡µ
  for (const tab of tabs) {
    if (shouldClose(tab)) {
      await chrome.tabs.remove(tab.id)
    }
  }
}
```

### æ¢å¤æ ‡ç­¾é¡µ

```javascript
// æ¢å¤å•ä¸ªæ ‡ç­¾é¡µ
await chrome.tabs.create({ url: tab.url })

// æ¢å¤æ ‡ç­¾ç»„
const tabIds = []
for (const tab of collection.tabs) {
  const newTab = await chrome.tabs.create({ url: tab.url })
  tabIds.push(newTab.id)
}
const groupId = await chrome.tabs.group({ tabIds })
await chrome.tabGroups.update(groupId, {
  title: collection.name,
  color: collection.color
})

// åœ¨æ–°çª—å£æ‰“å¼€æ¨¡æ¿
const newWindow = await chrome.windows.create({ url: urls })
```

---

## ğŸ¨ ä¸»é¢˜ç³»ç»Ÿ

### CSSå˜é‡

```css
:root {
  /* èƒŒæ™¯è‰² */
  --bg-primary: #ffffff;
  --bg-secondary: #f5f5f7;
  --bg-active: #ffffff;
  
  /* æ–‡å­—è‰² */
  --text-primary: #1d1d1f;
  --text-secondary: #86868b;
  
  /* è¾¹æ¡† */
  --border-color: rgba(0, 0, 0, 0.1);
  
  /* ä¸»é¢˜è‰² */
  --primary-color: #007aff;
}

[data-theme="dark"] {
  --bg-primary: #1c1c1e;
  --bg-secondary: #2c2c2e;
  --text-primary: #ffffff;
  --text-secondary: #98989d;
}
```

### é¢œè‰²æ˜ å°„ (Chrome Tab Groupé¢œè‰²)

```javascript
const colorMap = {
  grey: '#5f6368',
  blue: '#1a73e8',
  red: '#d93025',
  yellow: '#f9ab00',
  green: '#1e8e3e',
  pink: '#d01884',
  purple: '#a142f4',
  cyan: '#007b83',
  orange: '#fa903e'
}
```

---

## ğŸ“¦ ç»„ä»¶é€šä¿¡æ¨¡å¼

### Props Down, Events Up

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Parent (SessionsView)                       â”‚
â”‚    â”‚                                         â”‚
â”‚    â”œâ”€â”€ props: session â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ SessionCard â”‚
â”‚    â”‚                                         â”‚
â”‚    â—€â”€â”€ @restore â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SessionCard â”‚
â”‚    â—€â”€â”€ @delete â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SessionCard â”‚
â”‚    â—€â”€â”€ @toggle-pin â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SessionCard â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Store æ³¨å…¥æ¨¡å¼

```javascript
// åœ¨ç»„ä»¶ä¸­
import { useSessionsStore } from '@/stores/sessionsStore'
import { useToast } from 'primevue/usetoast'

const sessionsStore = useSessionsStore()
const toast = useToast()

// ç›´æ¥è°ƒç”¨ store action
await sessionsStore.deleteSession(sessionId)
toast.add({ summary: 'åˆ é™¤æˆåŠŸ', severity: 'success' })
```

---

## âœ… å¼€å‘çŠ¶æ€æ€»ç»“

| æ¨¡å— | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| å¸ƒå±€æ¡†æ¶ | âœ… å®Œæˆ | HomeView ä¾§è¾¹æ +Tabå¸ƒå±€ |
| ä¼šè¯æ”¶çº³ | âœ… å®Œæˆ | SessionsView, SessionCard |
| æ”¶è—é›†ç®¡ç† | âœ… å®Œæˆ | CollectionsView, CollectionEditor |
| æ¨¡æ¿ç®¡ç† | âœ… å®Œæˆ | TemplatesView, TemplateEditor |
| æ‹–æ‹½ç³»ç»Ÿ | âœ… å®Œæˆ | DraggableTab, DropZone, DragPreview |
| æœç´¢åŠŸèƒ½ | âœ… å®Œæˆ | SearchBar å…¨å±€æœç´¢ |
| å³é”®èœå• | âœ… å®Œæˆ | ContextMenu ç»„ä»¶ |
| ä¸»é¢˜åˆ‡æ¢ | âœ… å®Œæˆ | themeStore, äº®/æš—/è·Ÿéšç³»ç»Ÿ |
| å¿«æ·é”® | âœ… å®Œæˆ | shortcuts.js |
| è®¾ç½®é¡µé¢ | âœ… å®Œæˆ | Settings.vue |
| é”™è¯¯å¤„ç† | âœ… å®Œæˆ | errorHandler.js |

---

## ğŸ“š å¿«é€Ÿå¼€å§‹æŒ‡å—

### 1. æ·»åŠ æ–°çš„è§†å›¾

```javascript
// 1. åˆ›å»º views/NewView.vue
// 2. åœ¨ HomeView.vue ä¸­æ·»åŠ  Tab
<NewView v-else-if="activeTab === 'new'" />

// 3. æ·»åŠ  Tab æŒ‰é’®
<button @click="activeTab = 'new'">New</button>
```

### 2. æ·»åŠ æ–°çš„ Store

```javascript
// 1. åˆ›å»º stores/newStore.js
import { defineStore } from 'pinia'
import { chromeStorageGet, chromeStorageSet } from '@/utils/chrome-storage'

export const useNewStore = defineStore('new', {
  state: () => ({ items: [] }),
  actions: {
    async loadItems() {
      const data = await chromeStorageGet('onetabs_new')
      this.items = data?.onetabs_new || []
    }
  }
})
```

### 3. æ·»åŠ å³é”®èœå•

```javascript
// 1. åœ¨ utils/contextMenus.js æ·»åŠ èœå•é…ç½®
export const getNewContextMenu = (item) => [
  { id: 'action1', label: 'æ“ä½œ1', icon: 'pi pi-xxx' },
  { divider: true },
  { id: 'delete', label: 'åˆ é™¤', danger: true }
]

// 2. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
import { useContextMenu } from '@/composables/useContextMenu'
const { showContextMenu, contextMenuPosition, showMenu } = useContextMenu()
```

---

## ğŸ”„ æ›´æ–°è®°å½•

| æ—¥æœŸ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| 2026-01-26 | 2.0 | æ›´æ–°ä¸ºå®é™…å®ç°çš„æ¶æ„ï¼Œæ·»åŠ è¯¦ç»†ç»„ä»¶è¯´æ˜ |
| 2026-01-20 | 1.0 | ç¡®å®šå•é¡µé¢+Tabåˆ‡æ¢æ¶æ„ |
